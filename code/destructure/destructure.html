<!doctype html>

<html>

<head>
  <meta charset="utf-8">
  <title>Destructuring closures</title>
</head>

<body>

  <script>

    const importObject = {
      js: {
        log: n => console.log(n)
      }
    };

    WebAssembly
      .instantiateStreaming(fetch('destructure.wasm'), importObject)
      .then(wasm => {
        for (let i = 0; i <= 3; i++) {
          try {
            wasm.instance.exports.destruct_and_add(i);
          } catch (e) {
            console.error(e);
          }
        }
      });

  </script>
</body>

</html>